#{extends 'main.html' /}
#{set title:'Home' /}
<script type="application/javascript">
    var highlight = "highlight";
    $( document ).ready(function() {
        $('.audioTrack').click(function(){
            console.log("click@")
            $('.highlight').removeClass('highlight');
            $(this).addClass('highlight');
            playAudio(this.id);
        });
    });


    function playAudio(id){
        document.ownVibe = document.getElementById("ownVibe");
        document.ownVibe.src = "/audio/" + id;
        document.ownVibe.play();

        $(".audioTrack").removeClass(highlight);
        $(event.target).addClass('highlight');
    }

</script>

<div id="middleman">
    <audio controls preload id="ownVibe">
        <source src="/audio/1">
    </audio>
    <ul>
    #{list items:audios, as:'audio'}
        <li class="audioTrack" id="${audio.id}">${audio.name}</li>
    #{/list}
    </ul>

    #{form @Application.upload(audio), enctype:'multipart/form-data', method:'POST'}
        <input type="file" name="audioFile">
        <input type="submit" value="Submit">
    #{/form}

    <a href="@{Application.logout()}">Logout</a>
</div>
